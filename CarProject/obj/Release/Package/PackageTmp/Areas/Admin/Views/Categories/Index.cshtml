@using CarProject.DBSEF
@using CarProject.Areas.Admin.Controllers.Store


@{
    ViewBag.Title = "دسته بندی محصولات";
    var dc = new CarAutomationEntities();
    var xt = new CategoriesTools();
}




<form id="selectionItem" method="post">
    <div class="inputsContainer">
        <input type="hidden" name="SelectedID" id="SelectedID" />
        <div class="input">
            <label for="SelectedName">نام دسته بندی انتخاب شده</label>
            <input type="text" name="SelectedName" id="SelectedName" readonly="readonly" placeholder="نام دسته بندی" />
        </div>
        <div class="input">
            <label for="SelectedDescription">توضیحات دسته بندی انتخاب شده</label>
            <textarea name="SelectedDescription" id="SelectedDescription" readonly="readonly" placeholder="توضیحات"></textarea>
        </div>
    </div>

    <div style="display:flex; justify-content:center; align-items:center;">
        <button type="submit" name="InsertNode" class="button green"><section class="gia-add">اضافه کردن گره فرزند</section></button>
        <button type="submit" name="updateItem" class="button blue"><section class="gia-edit">ویرایش</section></button>
        <button type="button" name="Delete" class="button red" onclick="deletebuttonclick()"><section class="gia-remove">حذف</section></button>

        <button type="button" onclick="$('#selectionItem').hide()" class="button"><section class="gia-inactive" >بستن</section></button>
    </div>
</form>

<div class="treeview">
    @xt.CreateTreeView(null, dc, "CatItemClick(this)")
</div>


<div id="removeBack">
    <div id="removeMessage">
        <div id="DeleteMesseage">آیا از حذف مورد انتخابی اطمینان دارید؟</div>
        <form method="post" action="@Url.Action("Delete","Categories")" style="display:flex; justify-content:center; align-items:center;">
            <input type="hidden" id="RemoveItem" name="Id" value="" />

            <button type="submit" name="RemoveItem" class="button orange"><section class="gia-remove">حذف گره و انتقال زیر مجموعه به بالا</section></button>
            <button type="submit" name="RemoveAll" class="button red"><section class="gia-remove">حذف گره و زیر مجموعه های مرتبط</section></button>
            <button type="button" class="button green" onclick="deleteCancel()">انصراف</button>
        </form>
    </div>
</div>


@section style
{
    <style>
        .treeview {
            border-top:thin solid;
            margin-top:10px;
        }



        #removeBack {
            position:fixed;
            background:rgba(0, 0, 0, 0.60);
            top:0;
            bottom:0;
            left:0;
            right:0;

            z-index:9999;


            display:flex;
            justify-content:center;
            align-items:center;

            display:none;
        }
            #removeBack.show {
                display:flex;
            }
        #removeMessage {
            padding:10px;
            min-width:300px;
            background:white;

            border:thin solid #888;
            border-radius:5px;
            box-shadow:0 0 3px 0 #333;
        }
    </style>
}

@section script
{
    <script>
        function CatItemClick(el) {
            document.getElementById("SelectedID").value = el.getAttribute("data-id");
            document.getElementById("SelectedName").value = el.getAttribute("data-name");
            document.getElementById("SelectedDescription").value = el.getAttribute("data-description");
            $("#selectionItem").show();
        }

        $("#selectionItem").hide();


        function deletebuttonclick() {

            document.getElementById('removeBack').classList.add("show");
            document.getElementById("RemoveItem").value = document.getElementById("SelectedID").value;
        }

        function deleteCancel() {
            document.getElementById('removeBack').classList.remove("show");
        }
    </script>
}