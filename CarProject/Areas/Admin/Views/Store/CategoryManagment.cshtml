@model CarProject.Areas.Admin.Models.Store.CategoryModel
@using CarProject.App_Code
@{
    ViewBag.Title = "CategoryManagment";

    var x = new CarProject.Areas.Admin.Controllers.StoreMVC();
    
}

<h2>مدیریت گروه  بندی کالاها</h2>

<div>
    <div id="form">
        <form method="post">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.Category.CategoryName, "نام گروه")
                @Html.input_TextArea(m => m.Category.Description, "توضیحات")
                
                <div class="input">
                    <label>گروه پدر</label>
                    <section>
                        @Html.HiddenFor(m => m.Category.ParentCategoryId)
                        <section id="parentCategoryName"></section>
                    </section>
                    @Html.ValidationMessageFor(m => m.Category.ParentCategoryId)
                </div>
            </div>
            <div class="inputAction">
                <input type="submit" class="button green" value="ثبت" />
            </div>

            <section>* <small>ریشه پدر را از لیست زیر انتخاب کنید</small></section>
        </form>
    </div>

    <div id="GroupsPresentation">
        @x.Categories(null | 0, aHref: "javascript:void(0)", aClass: "categoriItemLink")
    </div>
</div>


@section script
{
    <script>
        $(".categoriItemLink").click(function (e) {
            document.getElementById("parentCategoryName").innerHTML = $(this).attr("data-name");
            document.getElementById("@Html.IdFor(m => m.Category.ParentCategoryId)").value = $(this).attr("data-id");
        });
    </script>
}