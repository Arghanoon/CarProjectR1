@model CarProject.Areas.Admin.Models.Cars.CarsModel
@using CarProject.App_Code
@using db = CarProject.DBSEF
@{
    ViewBag.Title = "ثبت خودرو";
    var dbs  = new db.CarAutomationEntities();
}



<form method="post" id="form1">
    <div class="wizardContainer">
        <div class="wizardNav">
            <a href="#w1">اطلاعات خودرو</a>
            <a href="#w2">موتور</a>
            <a href="#w3">گیر بکس</a>
            <a href="#w4">مشخصات فیزیکی</a>
            <a href="#w5">سیستم ترمز</a>
            <a href="#w6">مصرف سوخت</a>
            <a href="#w7">سیستم های امنیتی خودرو</a>
            <a href="#w8">سیستم فرمان خودرو</a>
            <a href="#w9">سیستم تهویه</a>
        </div>


        <div class="wizardPage" id="w1">
            <div class="inputsContainer">
                @Html.input_ComboBox(m => m.Car.CarModel.CarBrand.CarBrandId, "برند", dbs.CarBrands.ToDictionary(b => b.CarBrandId, b => b.CarBrandName))
                @Html.input_TextBox(m => m.Car.CarModel.CarModelName, "مدل")

                @Html.input_TextBox(m => m.Car.CarsClass, "کلاس خودرو")
                @Html.input_Rating(m => m.Car.CarsClinicScore, "امتیاز کلینیک")
                @Html.input_TextBox(m => m.Car.Price, "قیمت اولیه")
                @Html.input_TextBox(m => m.Car.CarsVideoURL, "آدرس ویدئو")
                @Html.input_TextBox(m => m.Car.CarClassType, "کلاس خودرو")
                @Html.input_TextBox(m => m.Car.CarCategory, "دسته بندی خودرو")
                @Html.input_TextBox(m => m.Car.CarUsage, "کاربر خودرو")
                @Html.input_TextBox(m => m.Car.CarYearModel, "ساخت ساخت")
                @Html.input_ComboBox(m => m.Car.CarBodyType, "نوع بدنه", Model.List_CarBodyTypes)
                @Html.input_TextArea(m => m.Car.CarsDescription, "توضیحات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
            </div>
        </div>

        <div class="wizardPage" id="w2">
            <div class="inputsContainer">
                @Html.input_ComboBox(m => m.CarEngine.EngineType, "نوع موتور", Model.List_EngineTypes)
                @Html.input_TextBox(m => m.CarEngine.EngineCylinderNumber, "تعداد سیلندر")
                @Html.input_TextBox(m => m.CarEngine.EnginePowerHpRpm, "قدرت (اسب بخار بر دور بر دقیقه)")
                @Html.input_TextBox(m => m.CarEngine.EngineTorque, "گشتاور (نیوتون بر متر )")
                @Html.input_TextBox(m => m.CarEngine.EnginePowerHpTon, "توان وزنی (اسب بخار بر 1000 کلیوگرم)")
                @Html.input_TextBox(m => m.CarEngine.EnginePowerHpLitr, "توان خروجی (اسب بخار بر لیتر)")
                @Html.input_TextBox(m => m.CarEngine.EngineMaxSpeed, "حداکثر سرعت (کلیومتر بر ساعت)")
                @Html.input_TextBox(m => m.CarEngine.EngineZeroToH, "صفر تا صد خودرو (ثانیه)")
                @Html.input_TextBox(m => m.CarEngine.EngineSize, "حجم موتور (سی سی )")
                @Html.input_ComboBox(m => m.CarEngine.EngineFuel, "سوخت خودرو", Model.List_EngineFuel)
                @Html.input_TextArea(m => m.CarEngine.EngineDescription, "توضیحات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>

        <div class="wizardPage" id="w3">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.GearBox.GearBoxCode, "کد گیربکس")
                @Html.input_ComboBox(m => m.GearBox.GearBoxType, "نوع گیربکس", Model.List_GearBoxType)
                @Html.input_CheckBox(m => m.GearBox.GearBoxCanBeManual, "قابلیت تبدیل به دنده دستی")
                @Html.input_TextBox(m => m.GearBox.GearBoxShiftNumber, "تعداد دنده")
                @Html.input_TextBox(m => m.GearBox.GearBoxAxel, "محور جابه‌جایی")
                @Html.input_CheckBox(m => m.GearBox.HasTransferCase, "آیا دارای کمک گیربکس است")
                @Html.input_CheckBox(m => m.GearBox.GearBoxDiffrentionalLock, "قفل دفرانسیل")
                @Html.input_TextBox(m => m.GearBox.GearBoxWdType, "نوع 4WD")
                @Html.input_TextArea(m => m.GearBox.GearBoxDescription, "توضیحات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>

        <div class="wizardPage" id="w4">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.PhysicalDetail.CarLength, "طول خودرو")
                @Html.input_TextBox(m => m.PhysicalDetail.Carwidth, "عرض خودرو")
                @Html.input_TextBox(m => m.PhysicalDetail.CarHeight, "ارتفاع خودرو")
                @Html.input_TextBox(m => m.PhysicalDetail.CarTrack, "فاصله دو چرخ یک محور")
                @Html.input_TextBox(m => m.PhysicalDetail.CarWheelBase, "فاصله دو محور از یکدیگر")
                @Html.input_TextBox(m => m.PhysicalDetail.CarPureWeight, "وزن خالص")
                @Html.input_TextBox(m => m.PhysicalDetail.CarTankSize, "حجم باک بنزین")
                @Html.input_TextBox(m => m.PhysicalDetail.Details, "توضیحات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>
        
        <div class="wizardPage" id="w5">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.BrakeSystem.FrontBrakeSystem, "سیستم ترمزهای چرخ های جلو")
                @Html.input_TextBox(m => m.BrakeSystem.RearBrakeSystem, "سیستم ترمز چرخ های عقب")
                @Html.input_TextBox(m => m.BrakeSystem.OtherSystem, "سیستم های دیگر")
                @Html.input_TextBox(m => m.BrakeSystem.HandBrakeSystem, "سیستم ترمز دستی")
                @Html.input_TextArea(m => m.BrakeSystem.Details, "جزئیات")
            </div>

            <h3 class="underline">ثبت جزئیات <a href="javascript:void()" onclick="InsertNew_Textbox('DetailedBreakSystemControls')" class="gia-add"></a></h3>
            <div class="detailsContainer">
                <div class="controls" id="DetailedBreakSystemControls">
                    @foreach (var item in Model.DetailedBrakeSystems)
                    {
                        <div class="input">
                            <input type="text" value="@item.DetailedName" />
                            <a href="javascript:void()" onclick="this.offsetParent.remove();" class="gia-remove" ></a>
                        </div>
                    }
                </div>
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>
        
        <div class="wizardPage" id="w6">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.FuelConsumption.LphCity, "مصرف سوخت داخل شهر")
                @Html.input_TextBox(m => m.FuelConsumption.LphRoad, "مصرف سوخت جاده")
                @Html.input_TextBox(m => m.FuelConsumption.LphMix, "سیکل ترکیبی مصرف سوخت")
                @Html.input_TextArea(m => m.FuelConsumption.Details, "توضیحات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>
        
        <div class="wizardPage" id="w7">
            <div class="inputsContainer">
                @Html.input_CheckBox(m => m.SecuritySystem.RemoteControl, "آیا دارای ریموت کنترل است ؟")
                @Html.input_CheckBox(m => m.SecuritySystem.BurglarAlarm, "آیا دارای دزدگیر است ؟")
                @Html.input_CheckBox(m => m.SecuritySystem.Alarm, "آیا دارای آژیر است ؟")
                @Html.input_CheckBox(m => m.SecuritySystem.Emo, "آیا دارای سیستم ضد سرقت است ؟")
                @Html.input_CheckBox(m => m.SecuritySystem.KeylessDoor, "آیا درب ها بدون سوییچ باز میشود ؟")
                @Html.input_CheckBox(m => m.SecuritySystem.KeylessStart, "آیا بدون سوییچ روشن می‌شود ؟")
                @Html.input_TextArea(m => m.SecuritySystem.Details, "توضیحات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>
        
        <div class="wizardPage" id="w8">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.SteeringSystem.SteeringSystemType, "نوع سیستم فرمان")
                @Html.input_TextBox(m => m.SteeringSystem.SteeringType, "مدل فرمان ")
                @Html.input_TextBox(m => m.SteeringSystem.SteeringHeightAdjustble, "امکان تنظیم ارتفاع فرمان ")
                @Html.input_TextBox(m => m.SteeringSystem.SteeringControlKey, "دکمه های کنترلی روی فرمان")
                @Html.input_TextBox(m => m.SteeringSystem.Details, "جزئیات")
            </div>
            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>
        
        <div class="wizardPage" id="w9">
            <div class="inputsContainer">
                @Html.input_TextBox(m => m.AirConditioningSystem.AirConditioningType, "نوع تهویه")
                @Html.input_TextBox(m => m.AirConditioningSystem.Details, "جزئیات")
            </div>
            @Html.NameFor(m => m.DetailedBrakeSystems[0].DetailedName)
            <h3 class="underline">جزئیات <a href="javascript:void()" onclick="InsertNew_TextboxAndTextArea('AirContitionSystemDetails')" class="gia-add"></a></h3>
            <div class="">
                <div class="controls" id="AirContitionSystemDetails">

                </div>
            </div>

            <div class="footer" style="direction: ltr;">
                <input type="button" class="button blue" onclick="wizardNextPage(this)" value="ادامه" />
                <input type="button" class="button yellow" onclick="wizardPreviousPage(this)" value="قبلی" />
            </div>
        </div>
        
    </div>

    <div id="formAction">
        <input type="submit" value="ثبت اطلاعات خودرو" />
    </div>
</form>


@section script
{
    <script>
        document.getElementById("form1").addEventListener("submit", function (e) { e.preventDefault(); BeforeSubmitActions(); this.submit(); });
        function BeforeSubmitActions() {
            DetailedBreakSystemNaming();
        }

        function InsertNew_Textbox(id) {
            div = document.createElement('div');
            div.classList.add("input");

            del = document.createElement('a');
            del.classList.add("gia-remove");
            del.href = "javascript:void()";
            del.onclick = function (e) { this.offsetParent.remove(); };
            
            inp = document.createElement("input")
            inp.type = "text";
            div.appendChild(inp);
            div.appendChild(del);
            document.getElementById(id).appendChild(div);
        }
        function InsertNew_TextboxAndTextArea(id) {
            div1 = document.createElement('div');
            div1.classList.add("input");

            del = document.createElement('a');
            del.classList.add("gia-remove");
            del.href = "javascript:void()";
            del.onclick = function (e) { this.offsetParent.offsetParent.remove(); };

            inp = document.createElement("input")
            inp.type = "text";
            div1.appendChild(inp);
            div1.appendChild(del);

            div2 = document.createElement('div');
            div2.classList.add("input");
            txtarea = document.createElement("textarea");
            div2.appendChild(txtarea);
            
            div = document.createElement('div');
            div.classList.add("controls2");
            div.appendChild(div1);
            div.appendChild(div2);
            document.getElementById(id).appendChild(div);
        }

        function DetailedBreakSystemNaming() {
            var inps = document.getElementById("DetailedBreakSystemControls").querySelectorAll("input");
            for (var i = 0; i < inps.length; i++) {
                inps[i].name = "DetailedBrakeSystems[" + i + "].DetailedName";
            }
        }
    </script>
}

@section style
{
    <style>
        .detailsContainer {
            display:flex;
            justify-content:space-between;

        }
            .detailsContainer .controls {
                position:relative;
                flex:1;
            }
                .detailsContainer .controls > * {
                   display:flex;
                   flex:1;
                   justify-content:center;
                   align-items:center;
                }

        .controls2 {
            border:thin solid #888;
            margin:5px;
            padding:3px;
            border-radius:3px;
        }
        .controls2 > * {
            display:flex;
            flex:1;
        }
            .controls2 > *:nth-child(1) {
                   justify-content:center;
                   align-items:center;
            }

        .underline {
            border-bottom:thin solid #888;
        }
    </style>
}